# 开发环境配置

## 热重载配置

### 问题描述
在开发过程中，修改 `docs/` 目录下的文档文件会导致 Strapi 热重载，影响开发效率。

### 解决方案
在 `config/server.ts` 中配置 `watchIgnoreFiles` 来忽略特定文件和目录：

```typescript
export default ({ env }) => ({
  host: env('HOST', '0.0.0.0'),
  port: env.int('PORT', 1337),
  app: {
    keys: env.array('APP_KEYS'),
  },
  // 开发模式配置
  ...(env('NODE_ENV') === 'development' && {
    watchIgnoreFiles: [
      '**/node_modules/**',
      '**/dist/**',
      '**/.cache/**',
      '**/build/**',
      '**/docs/**',           // 忽略docs目录，避免文档修改时重载
      '**/README.md',         // 忽略README文件
      '**/*.md',              // 忽略所有markdown文件
    ],
  }),
});
```

### 配置说明

#### 忽略的文件类型
- `**/docs/**` - 整个docs目录及其子目录
- `**/README.md` - 项目根目录的README文件
- `**/*.md` - 所有markdown文件

#### 效果
- ✅ 修改 `docs/` 目录下的任何文件不会触发热重载
- ✅ 修改项目根目录的 `README.md` 不会触发热重载
- ✅ 修改任何 `.md` 文件不会触发热重载
- ✅ 修改源代码文件仍会正常触发热重载

### 验证方法

1. 启动开发服务器：
   ```bash
   npm run develop
   ```

2. 修改docs目录下的文件：
   ```bash
   echo "# 测试" >> docs/test.md
   ```

3. 检查Strapi进程是否仍在运行：
   ```bash
   ps aux | grep strapi
   ```

4. 如果进程仍在运行，说明配置生效

### 注意事项

- 此配置仅在开发环境 (`NODE_ENV=development`) 下生效
- 生产环境不受此配置影响
- 如果需要监听docs目录的变化，可以临时注释掉相关配置

### 其他可忽略的文件类型

如果需要忽略其他文件类型，可以在 `watchIgnoreFiles` 数组中添加：

```typescript
watchIgnoreFiles: [
  '**/node_modules/**',
  '**/dist/**',
  '**/.cache/**',
  '**/build/**',
  '**/docs/**',
  '**/README.md',
  '**/*.md',
  '**/logs/**',           // 日志文件
  '**/*.log',             // 所有日志文件
  '**/temp/**',           // 临时文件目录
  '**/.env.local',        // 本地环境变量文件
  '**/coverage/**',       // 测试覆盖率报告
],
```

## 开发环境优化

### 性能优化
- 忽略不必要的文件可以提高热重载性能
- 减少文件系统监听的开销
- 避免因文档修改导致的意外重载

### 开发体验
- 可以随时修改文档而不影响开发服务器
- 保持开发环境的稳定性
- 提高开发效率

## 相关配置

### Strapi 配置
- 主配置文件：`config/server.ts`
- 环境变量：`.env`
- 开发脚本：`package.json` 中的 `dev` 和 `develop` 命令

### 文件监听
- Strapi 使用 chokidar 进行文件监听
- 支持 glob 模式匹配
- 支持递归目录监听
